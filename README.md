# Парсер для Magazinnoff.ru

Этот проект - парсер для сбора данных о товарах с сайта `magazinnoff.ru`.
Он собирает названия- цены- бренды и другую информацию и сохраняет все в Excel файл.

## Главные фишки

- **Модульная структура** - код разделен на логические части- его легко чинить и понимать.
- **Обход защиты** - парсер использует `selenium-stealth` и сохраняет куки в папку `magazinnoff_profile`- чтобы не проходить капчу каждый раз.
- **Гибкая настройка** - все города- товары и бренды для поиска настраиваются в одном файле `config.py`.
- **Сохранение в Excel** - готовый результат работы сохраняется в папку `output`.
- **Логирование** - все шаги и ошибки записываются в текстовые файлы в папку `log`.

## Структура проекта

```
.
├── main.py                 # Главный файл- запускает все парсеры
├── config.py               # ВАЖНЫЙ ФАЙЛ - все настройки тут
├── utils.py                # Помощники- запись в Excel- отправка в Телеграм
├── requirements.txt        # Список библиотек для установки
|
├── magazinnoff.py          # Файл-вход для парсера Магазинофф
└── magazinoff_pkg/         # Папка с основной логикой парсера
    ├── browser.py          # Управляет браузером (запуск- куки)
    ├── collector.py        # Главный сценарий сбора данных
    └── html_parser.py      # Разбирает HTML-код страниц
|
├── magazinnoff_profile/    # Папка для хранения куки (создается сама)
├── output/                 # Папка для итоговых Excel-файлов
└── log/                    # Папка для логов работы
```

## Установка

1.  **Установить Python** - версии 3.9 или новее.
2.  **Установить Google Chrome** - на компьютер.
3.  **Скачать проект** - и распаковать в папку.
4.  **Создать виртуальное окружение** - открыть терминал в папке проекта и выполнить:
    ```bash
    # Создаем окружение
    python -m venv .venv
    # Активируем его (для Windows)
    .\.venv\Scripts\activate
    ```
5.  **Установить библиотеки** - выполнить команду:
    ```bash
    pip install -r requirements.txt
    ```

## Настройка

Все настройки находятся в файле **`config.py`**.
Откройте его и укажите нужные параметры- например:

-   `cities` - список городов для парсинга.
    ```python
    cities = ["Иваново", "Кострома"]
    ```
-   `search_req` - список товаров для поиска.
    ```python
    search_req = ["молоко 2.5", "масло 82"]
    ```
-   `brand` - список брендов для поиска.
-   `agrigator` - список торговых сетей. Если список пустой- парсер соберет все магазины в городе.
-   `TelegramBot` - настройки для уведомлений в Телеграм.

## Запуск

1.  Убедитесь- что вы настроили `config.py`.
2.  Активируйте виртуальное окружение (если еще не сделали).
3.  Запустите главный файл из терминала:

    ```bash
    python main.py
    ```

## Важные моменты

-   **ПЕРВЫЙ ЗАПУСК** - При первом запуске откроется браузер и сайт покажет капчу (экран `Just a moment...`). Нужно **один раз вручную** пройти ее. После этого парсер сохранит куки и будет заходить без капчи.

-   **Ошибки** - Если парсер не находит магазины или товары- в папке проекта появится файл `debug_...html`. Он покажет- что видит робот (скорее всего- блокировку). Все ошибки также пишутся в консоль и в папку `log`.